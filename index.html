<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title>Russian Car Driver HD</title>
    <meta name="viewport" content="width=device-width">

    <!-- Existing CSS -->
    <link href="config/TemplateData56/style.css" rel="stylesheet">
    <link href="config/shared/style.css" rel="stylesheet">
    <link href="config/shared/gamebreak/gamebreak.css" rel="stylesheet">

    <!-- Scripts -->
    <script src="config/shared/lib.js" type="text/javascript"></script>
    <script src="config/shared/browser_detector.js" type="text/javascript"></script>
    <script src="config/shared/sound_enabler.js" type="text/javascript"></script>
    <script src="config/shared/metrika.js" type="text/javascript"></script>
    <script src="config/shared/gamebreak/gamebreak.js" type="text/javascript"></script>
    <script src="config/TemplateData56/game.js" type="text/javascript"></script>
    <script src="config/TemplateData56/responsive.js" type="text/javascript"></script>
    <script src="config/TemplateData56/UnityProgress.js"></script>
    <script src="Build/UnityLoader.js"></script>

    <!-- BLURRED BACKGROUND + LAYOUT + INTRO -->
    <style>
      html, body {
        margin: 0;
        padding: 0;
        height: 100%;
      }

      body {
        background: #000;
        overflow: hidden;
      }

      /* Intro state lock */
      body.intro-active {
        overflow: hidden;
      }

      /* Fullscreen intro overlay */
      #intro-screen {
        position: fixed;
        inset: 0;
        background-color: #414141;
        display: flex;
        align-items: center;
        justify-content: center;
        z-index: 9999;
        transition: opacity 0.7s ease, visibility 0.7s ease;
      }

      #intro-screen.hidden-intro {
        opacity: 0;
        visibility: hidden;
      }

      #intro-logo-wrapper {
        display: flex;
        flex-direction: column;
        align-items: center;
        animation: fadeIn 1s ease-out forwards;
      }

      #intro-title {
        font-family: "Orbitron", system-ui, -apple-system, BlinkMacSystemFont, sans-serif;
        font-size: 42px;
        font-weight: 700;
        letter-spacing: 3px;
        margin-bottom: 20px;
        background: linear-gradient(90deg, #d3a410, #b7870f, #ffe4a1);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        filter: drop-shadow(0 0 8px rgba(211,165,16,0.4));
        opacity: 0;
        animation: titleFade 1s ease forwards 0.4s;
        text-align: center;
      }

      @keyframes titleFade {
        from {
          opacity: 0;
          transform: translateY(-12px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      @keyframes fadeIn {
        from { opacity: 0; }
        to { opacity: 1; }
      }

      /* SVG animations */
      @keyframes bounce {
        0%, 100% { translate: 0px 36px; }
        50% { translate: 0px 46px; }
      }

      @keyframes bounce2 {
        0%, 100% { translate: 0px 46px; }
        50% { translate: 0px 56px; }
      }

      @keyframes umbral {
        0%   { stop-color: #d3a5102e; }
        50%  { stop-color: rgba(211,165,16,0.519); }
        100% { stop-color: #d3a5102e; }
      }

      @keyframes particles {
        0%, 100% { translate: 0px 16px; }
        50%      { translate: 0px 6px; }
      }

      #particles {
        animation: particles 4s ease-in-out infinite;
      }

      #animatedStop {
        animation: umbral 4s infinite;
      }

      #bounce {
        animation: bounce 4s ease-in-out infinite;
        translate: 0px 36px;
      }

      #bounce2 {
        animation: bounce2 4s ease-in-out infinite;
        translate: 0px 46px;
        animation-delay: 0.5s;
      }

      /* Fullscreen blurred background */
      .body-bg {
        position: fixed;
        inset: -20px;
        background-image: url("config/TemplateData56/rcd_bg.jpg"); /* adjust as needed */
        background-size: cover;
        background-position: center;
        filter: blur(35px) brightness(0.55);
        z-index: -1;
      }

      /* FORCE center the game container */
      #container {
        position: fixed;      /* important */
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%); /* PERFECT CENTER */
        z-index: 2;

        /* remove Unityâ€™s default flex junk */
        display: block !important;
        margin: 0 !important;
        padding: 0 !important;
        width: auto !important;
        height: auto !important;
      }

      /* Optional glow */
      #gameContainer {
        display: block;
        margin: 0 auto;
        box-shadow: 0px 0px 40px rgba(0,0,0,0.8);
      }

      .game-name {
        margin-top: 15px;
        text-align: center;
        color: white;
        font-family: Arial, sans-serif;
        font-size: 22px;
        text-shadow: 0 0 10px rgba(0,0,0,0.8);
      }
    </style>

  </head>

  <body class="intro-active">
    <!-- INTRO SCREEN -->
    <div id="intro-screen">
      <div id="intro-logo-wrapper">
        <div id="intro-title">Tinkle Games</div>

        <svg xmlns="http://www.w3.org/2000/svg" height="200" width="200">
          <g style="order: -1;">
            <polygon
              transform="rotate(45 100 100)"
              stroke-width="1"
              stroke="#d3a410"
              fill="none"
              points="70,70 148,50 130,130 50,150"
              id="bounce"
            ></polygon>
            <polygon
              transform="rotate(45 100 100)"
              stroke-width="1"
              stroke="#d3a410"
              fill="none"
              points="70,70 148,50 130,130 50,150"
              id="bounce2"
            ></polygon>
            <polygon
              transform="rotate(45 100 100)"
              stroke-width="2"
              stroke=""
              fill="#414750"
              points="70,70 150,50 130,130 50,150"
            ></polygon>
            <polygon
              stroke-width="2"
              stroke=""
              fill="url(#gradiente)"
              points="100,70 150,100 100,130 50,100"
            ></polygon>
            <defs>
              <linearGradient y2="100%" x2="10%" y1="0%" x1="0%" id="gradiente">
                <stop style="stop-color: #1e2026;stop-opacity:1" offset="20%"></stop>
                <stop style="stop-color:#414750;stop-opacity:1" offset="60%"></stop>
              </linearGradient>
            </defs>
            <polygon
              transform="translate(20, 31)"
              stroke-width="2"
              stroke=""
              fill="#b7870f"
              points="80,50 80,75 80,99 40,75"
            ></polygon>
            <polygon
              transform="translate(20, 31)"
              stroke-width="2"
              stroke=""
              fill="url(#gradiente2)"
              points="40,-40 80,-40 80,99 40,75"
            ></polygon>
            <defs>
              <linearGradient y2="100%" x2="0%" y1="-17%" x1="10%" id="gradiente2">
                <stop style="stop-color: #d3a51000;stop-opacity:1" offset="20%"></stop>
                <stop
                  style="stop-color:#d3a51054;stop-opacity:1"
                  offset="100%"
                  id="animatedStop"
                ></stop>
              </linearGradient>
            </defs>
            <polygon
              transform="rotate(180 100 100) translate(20, 20)"
              stroke-width="2"
              stroke=""
              fill="#d3a410"
              points="80,50 80,75 80,99 40,75"
            ></polygon>
            <polygon
              transform="rotate(0 100 100) translate(60, 20)"
              stroke-width="2"
              stroke=""
              fill="url(#gradiente3)"
              points="40,-40 80,-40 80,85 40,110.2"
            ></polygon>
            <defs>
              <linearGradient y2="100%" x2="10%" y1="0%" x1="0%" id="gradiente3">
                <stop style="stop-color: #d3a51000;stop-opacity:1" offset="20%"></stop>
                <stop
                  style="stop-color:#d3a51054;stop-opacity:1"
                  offset="100%"
                ></stop>
              </linearGradient>
            </defs>
            <polygon
              transform="rotate(45 100 100) translate(80, 95)"
              stroke-width="2"
              stroke=""
              fill="#ffe4a1"
              points="5,0 5,5 0,5 0,0"
              id="particles"
            ></polygon>
            <polygon
              transform="rotate(45 100 100) translate(80, 55)"
              stroke-width="2"
              stroke=""
              fill="#ccb069"
              points="6,0 6,6 0,6 0,0"
              id="particles"
            ></polygon>
            <polygon
              transform="rotate(45 100 100) translate(70, 80)"
              stroke-width="2"
              stroke=""
              fill="#fff"
              points="2,0 2,2 0,2 0,0"
              id="particles"
            ></polygon>
            <polygon
              stroke-width="2"
              stroke=""
              fill="#292d34"
              points="29.5,99.8 100,142 100,172 29.5,130"
            ></polygon>
            <polygon
              transform="translate(50, 92)"
              stroke-width="2"
              stroke=""
              fill="#1f2127"
              points="50,50 120.5,8 120.5,35 50,80"
            ></polygon>
          </g>
        </svg>
      </div>
    </div>
    <!-- END INTRO -->

    <!-- Blurred background layer -->
    <div class="body-bg"></div>

    <!-- GAME -->
    <div id="container" class="container webgl-content">
      <div id="gameContainer" style="width: 960px; height: 540px;"></div>
      <h1 class="game-name">Russian Car Driver HD</h1>
    </div>

    <!-- UNITY INIT -->
    <script>
      var gameInstance = UnityLoader.instantiate(
        "gameContainer",
        "Build/rcd_hd_sept_26.json",
        {
          onProgress: UnityProgress,
          Module: {
            onRuntimeInitialized: function () {
              UnityProgress(gameInstance, "complete");
            }
          }
        }
      );

      // Intro fade-out
      window.addEventListener("load", () => {
        const intro = document.getElementById("intro-screen");
        if (!intro) return;

        setTimeout(() => {
          intro.classList.add("hidden-intro");
          document.body.classList.remove("intro-active");

          setTimeout(() => {
            intro.remove();
          }, 800);
        }, 2000); // show intro for ~2 seconds
      });
    </script>
  </body>
</html>
